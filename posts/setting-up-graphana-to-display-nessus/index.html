<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Setting Up Grafana To Display Nessus Results And Jira Tasks" /><meta name="author" content="Matt C" /><meta property="og:locale" content="en" /><meta name="description" content="This is a run through on setting up Grafana to pull data from Nessus and tasks from Jira. Prerequisites:&nbsp; Two VMs capable of 4 GB of RAM, 2 Cores, 32 GB Disk space each.Nessus Version: Nessus-8.10.0-es8.x86_64.rpmInstalled with: rpm –ivh Nessus-8.10.0-es8.x86_64.rpm&nbsp;OS: Fedora 31-1.9 Setting up Grafana &nbsp;&nbsp; Add a new file to your YUM repo and populate it with the data below.&nbsp;&nbsp;&nbsp;sudo nano /etc/yum.repos.d/grafana.repo[grafana]name=grafanabaseurl=https://packages.grafana.com/oss/rpmrepo_gpgcheck=1enabled=1gpgcheck=1gpgkey=https://packages.grafana.com/gpg.keysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crt&nbsp;&nbsp;&nbsp; Once that is done, we can install Grafanasudo yum install grafana&nbsp;&nbsp;&nbsp; We will need to allow this through on the firewall, it uses port 3000Firewall-cmd -–add-port=3000/tcp --permanentFirewall-cmd –reload&nbsp;&nbsp;&nbsp; Log into the Grafana dashboard at &lt;localhost&gt;:3000, the username and password is admin/admin &nbsp;&nbsp;&nbsp; On first login, and after updating the admin password, we are presented with a view of tasks to be done. The first is to add a data source. Select MySQL and enter the host IP, database name, DB username/password, and be sure that the user only has the SELECT permission on the database. Name this after the first client, you will be working with. Save &amp; Test.&nbsp;&nbsp;&nbsp; We will then set up a new dashboard. Mouse over the + and click Dashboard. You should now see a new view with a blank panel prompting you to add a query or choose a visualization. Click Add Query. You will be brought to a screen showing a MySQL query that we will modify. First, depending on the client that you are setting up, you want to select from the “query drop down” menu the correct client we are writing this for. If this dashboard is for Client 1, make sure the query is for Client 1. Modify the query to reflect the below image. We are telling MySQL to pull data from a table called &quot;test&quot; and select the column &quot;number_of_vulns&quot;, and &quot;time&quot; which we&#39;ll use to chart a trend graph. &lt;div class=&quot;SCXW62147716 BCX2&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-ef05e7b2-7fff-692f-b39d-7aa481c49443&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Setting up SQL Clients&lt;/div&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    We need to setup a test client with a MySQL DB to emulate how our Nessus scanner will send results.  &lt;/div&gt;&lt;ol&gt;&lt;li&gt;Edit the MySQL cnf file to add the line&lt;/li&gt;&lt;ul&gt;&lt;li&gt;bind-address = IPofGrafana&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Login as root to MySQL and create the database and user&lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE DATABASE nessus_scans CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;&lt;/li&gt;&lt;li&gt;CREATE USER ‘client1_sql_connector’@’localhost’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;GRANT SELECT on nessus_scans.* TO ‘client1_sql_connector’@’IPofGrafana’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;FLUSH PRIVILEGES;&lt;/li&gt;&lt;li&gt;QUIT;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Create the table for Nessus results  &lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE TABLE test( id int NOT NULL auto_increment, time datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, number_of_vulns INT NOT NULL, PRIMARY KEY (ID) );&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;The insert statement I used to test this:&lt;/li&gt;&lt;ul&gt;&lt;li&gt;INSERT INTO test (number_of_vulns) VALUES (50);&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Id and Date are auto calculated, we only need to fill in the number of vulnerabilities detected for our test.&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ol&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    Create additional databases and tables for each piece of software being used. Pictured below are the Grafana customization’s for each panel and the table layout.&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;OutlineElement Ltr SCXW62147716 BCX2&quot; style=&quot;direction: ltr;&quot;&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-e2d5fa66-7fff-dcb7-61ed-8a45f4babd14&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;A note about Nessus. As many will point out, Nessus no longer allows base installations to utilize API functionality. You need to have Tennable IO or Tennable SC to be able to utilize the API at all. In a later post, I will go over how you can setup a query to pull the necessary fields we use here and display them on Grafana, but for now this can be populated with test data. When we do get the API setup, we will be pulling down the total number of vulnerabilities detected in that scan so that we can make a trend graph and show rises and falls over time. Below, you will find screenshots of how both this Jira and Nessus Panels are setup, to give you a better idea of what the queries look like.&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Jira Tasks Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;/h2&gt;&lt;/div&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Nessus Vulnerabilities Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt; &lt;/h2&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Connecting Jira DB to Graphana &lt;/h2&gt;I think this needs a section all of it’s own. I didn’t go through the Jira API in order to pull who was working what tasks and instead wrote some SQL queries and generated a special user to query the Jira DB. At the time of writing this, it was a lot quicker to do and because the user was only granted select, I wasn’t too worried about the security of this. If I could go back and spend more time on this, I would definitely work with the API to pull the needed information into a seperate SQL DB then import it from there. I actually recommend doing it this way because it will allow you to correlate the usernames of assignees on tickets with their internal Jira ID better. As it stands right now, when this displays ticket statuses, the assignee column will say JIRAUSER10000 instead of my username. The usernames are stored in another table, app_user. Without further ado, here is how Jira lays out the MySQL DB and how you can pull from it.The table we will be referencing is called jiraissue. It holds the issue summary, type, creator, assignee, and a whole host of other descriptors.Jira.jiraissue layout: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We will be using the “created”, “assignee”, and “summary” fields. Create a new user like the one below: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We then grant select to our new user for this table:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;  It’s important as well to open 3306 on the firewall to allow Grafana to make SQL calls: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;And finally the Grafana board properties:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h3 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;" /><meta property="og:description" content="This is a run through on setting up Grafana to pull data from Nessus and tasks from Jira. Prerequisites:&nbsp; Two VMs capable of 4 GB of RAM, 2 Cores, 32 GB Disk space each.Nessus Version: Nessus-8.10.0-es8.x86_64.rpmInstalled with: rpm –ivh Nessus-8.10.0-es8.x86_64.rpm&nbsp;OS: Fedora 31-1.9 Setting up Grafana &nbsp;&nbsp; Add a new file to your YUM repo and populate it with the data below.&nbsp;&nbsp;&nbsp;sudo nano /etc/yum.repos.d/grafana.repo[grafana]name=grafanabaseurl=https://packages.grafana.com/oss/rpmrepo_gpgcheck=1enabled=1gpgcheck=1gpgkey=https://packages.grafana.com/gpg.keysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crt&nbsp;&nbsp;&nbsp; Once that is done, we can install Grafanasudo yum install grafana&nbsp;&nbsp;&nbsp; We will need to allow this through on the firewall, it uses port 3000Firewall-cmd -–add-port=3000/tcp --permanentFirewall-cmd –reload&nbsp;&nbsp;&nbsp; Log into the Grafana dashboard at &lt;localhost&gt;:3000, the username and password is admin/admin &nbsp;&nbsp;&nbsp; On first login, and after updating the admin password, we are presented with a view of tasks to be done. The first is to add a data source. Select MySQL and enter the host IP, database name, DB username/password, and be sure that the user only has the SELECT permission on the database. Name this after the first client, you will be working with. Save &amp; Test.&nbsp;&nbsp;&nbsp; We will then set up a new dashboard. Mouse over the + and click Dashboard. You should now see a new view with a blank panel prompting you to add a query or choose a visualization. Click Add Query. You will be brought to a screen showing a MySQL query that we will modify. First, depending on the client that you are setting up, you want to select from the “query drop down” menu the correct client we are writing this for. If this dashboard is for Client 1, make sure the query is for Client 1. Modify the query to reflect the below image. We are telling MySQL to pull data from a table called &quot;test&quot; and select the column &quot;number_of_vulns&quot;, and &quot;time&quot; which we&#39;ll use to chart a trend graph. &lt;div class=&quot;SCXW62147716 BCX2&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-ef05e7b2-7fff-692f-b39d-7aa481c49443&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Setting up SQL Clients&lt;/div&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    We need to setup a test client with a MySQL DB to emulate how our Nessus scanner will send results.  &lt;/div&gt;&lt;ol&gt;&lt;li&gt;Edit the MySQL cnf file to add the line&lt;/li&gt;&lt;ul&gt;&lt;li&gt;bind-address = IPofGrafana&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Login as root to MySQL and create the database and user&lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE DATABASE nessus_scans CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;&lt;/li&gt;&lt;li&gt;CREATE USER ‘client1_sql_connector’@’localhost’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;GRANT SELECT on nessus_scans.* TO ‘client1_sql_connector’@’IPofGrafana’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;FLUSH PRIVILEGES;&lt;/li&gt;&lt;li&gt;QUIT;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Create the table for Nessus results  &lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE TABLE test( id int NOT NULL auto_increment, time datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, number_of_vulns INT NOT NULL, PRIMARY KEY (ID) );&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;The insert statement I used to test this:&lt;/li&gt;&lt;ul&gt;&lt;li&gt;INSERT INTO test (number_of_vulns) VALUES (50);&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Id and Date are auto calculated, we only need to fill in the number of vulnerabilities detected for our test.&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ol&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    Create additional databases and tables for each piece of software being used. Pictured below are the Grafana customization’s for each panel and the table layout.&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;OutlineElement Ltr SCXW62147716 BCX2&quot; style=&quot;direction: ltr;&quot;&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-e2d5fa66-7fff-dcb7-61ed-8a45f4babd14&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;A note about Nessus. As many will point out, Nessus no longer allows base installations to utilize API functionality. You need to have Tennable IO or Tennable SC to be able to utilize the API at all. In a later post, I will go over how you can setup a query to pull the necessary fields we use here and display them on Grafana, but for now this can be populated with test data. When we do get the API setup, we will be pulling down the total number of vulnerabilities detected in that scan so that we can make a trend graph and show rises and falls over time. Below, you will find screenshots of how both this Jira and Nessus Panels are setup, to give you a better idea of what the queries look like.&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Jira Tasks Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;/h2&gt;&lt;/div&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Nessus Vulnerabilities Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt; &lt;/h2&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Connecting Jira DB to Graphana &lt;/h2&gt;I think this needs a section all of it’s own. I didn’t go through the Jira API in order to pull who was working what tasks and instead wrote some SQL queries and generated a special user to query the Jira DB. At the time of writing this, it was a lot quicker to do and because the user was only granted select, I wasn’t too worried about the security of this. If I could go back and spend more time on this, I would definitely work with the API to pull the needed information into a seperate SQL DB then import it from there. I actually recommend doing it this way because it will allow you to correlate the usernames of assignees on tickets with their internal Jira ID better. As it stands right now, when this displays ticket statuses, the assignee column will say JIRAUSER10000 instead of my username. The usernames are stored in another table, app_user. Without further ado, here is how Jira lays out the MySQL DB and how you can pull from it.The table we will be referencing is called jiraissue. It holds the issue summary, type, creator, assignee, and a whole host of other descriptors.Jira.jiraissue layout: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We will be using the “created”, “assignee”, and “summary” fields. Create a new user like the one below: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We then grant select to our new user for this table:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;  It’s important as well to open 3306 on the firewall to allow Grafana to make SQL calls: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;And finally the Grafana board properties:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h3 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;" /><link rel="canonical" href="/posts/setting-up-graphana-to-display-nessus/" /><meta property="og:url" content="/posts/setting-up-graphana-to-display-nessus/" /><meta property="og:site_name" content="Culbert Report" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-15T16:53:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Setting Up Grafana To Display Nessus Results And Jira Tasks" /><meta name="twitter:site" content="@mattculbert" /><meta name="twitter:creator" content="@Matt C" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Matt C"},"dateModified":"2022-09-06T19:34:41+00:00","datePublished":"2020-05-15T16:53:00+00:00","description":"This is a run through on setting up Grafana to pull data from Nessus and tasks from Jira. Prerequisites:&nbsp; Two VMs capable of 4 GB of RAM, 2 Cores, 32 GB Disk space each.Nessus Version: Nessus-8.10.0-es8.x86_64.rpmInstalled with: rpm –ivh Nessus-8.10.0-es8.x86_64.rpm&nbsp;OS: Fedora 31-1.9 Setting up Grafana &nbsp;&nbsp; Add a new file to your YUM repo and populate it with the data below.&nbsp;&nbsp;&nbsp;sudo nano /etc/yum.repos.d/grafana.repo[grafana]name=grafanabaseurl=https://packages.grafana.com/oss/rpmrepo_gpgcheck=1enabled=1gpgcheck=1gpgkey=https://packages.grafana.com/gpg.keysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crt&nbsp;&nbsp;&nbsp; Once that is done, we can install Grafanasudo yum install grafana&nbsp;&nbsp;&nbsp; We will need to allow this through on the firewall, it uses port 3000Firewall-cmd -–add-port=3000/tcp --permanentFirewall-cmd –reload&nbsp;&nbsp;&nbsp; Log into the Grafana dashboard at &lt;localhost&gt;:3000, the username and password is admin/admin &nbsp;&nbsp;&nbsp; On first login, and after updating the admin password, we are presented with a view of tasks to be done. The first is to add a data source. Select MySQL and enter the host IP, database name, DB username/password, and be sure that the user only has the SELECT permission on the database. Name this after the first client, you will be working with. Save &amp; Test.&nbsp;&nbsp;&nbsp; We will then set up a new dashboard. Mouse over the + and click Dashboard. You should now see a new view with a blank panel prompting you to add a query or choose a visualization. Click Add Query. You will be brought to a screen showing a MySQL query that we will modify. First, depending on the client that you are setting up, you want to select from the “query drop down” menu the correct client we are writing this for. If this dashboard is for Client 1, make sure the query is for Client 1. Modify the query to reflect the below image. We are telling MySQL to pull data from a table called &quot;test&quot; and select the column &quot;number_of_vulns&quot;, and &quot;time&quot; which we&#39;ll use to chart a trend graph. &lt;div class=&quot;SCXW62147716 BCX2&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-ef05e7b2-7fff-692f-b39d-7aa481c49443&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Setting up SQL Clients&lt;/div&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    We need to setup a test client with a MySQL DB to emulate how our Nessus scanner will send results.  &lt;/div&gt;&lt;ol&gt;&lt;li&gt;Edit the MySQL cnf file to add the line&lt;/li&gt;&lt;ul&gt;&lt;li&gt;bind-address = IPofGrafana&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Login as root to MySQL and create the database and user&lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE DATABASE nessus_scans CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;&lt;/li&gt;&lt;li&gt;CREATE USER ‘client1_sql_connector’@’localhost’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;GRANT SELECT on nessus_scans.* TO ‘client1_sql_connector’@’IPofGrafana’ IDENTIFIED BY ‘Str0ngDBP@ssw%rd’;&lt;/li&gt;&lt;li&gt;FLUSH PRIVILEGES;&lt;/li&gt;&lt;li&gt;QUIT;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Create the table for Nessus results  &lt;/li&gt;&lt;ul&gt;&lt;li&gt;CREATE TABLE test( id int NOT NULL auto_increment, time datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, number_of_vulns INT NOT NULL, PRIMARY KEY (ID) );&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;The insert statement I used to test this:&lt;/li&gt;&lt;ul&gt;&lt;li&gt;INSERT INTO test (number_of_vulns) VALUES (50);&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Id and Date are auto calculated, we only need to fill in the number of vulnerabilities detected for our test.&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ol&gt;&lt;div dir=&quot;ltr&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;    Create additional databases and tables for each piece of software being used. Pictured below are the Grafana customization’s for each panel and the table layout.&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;OutlineElement Ltr SCXW62147716 BCX2&quot; style=&quot;direction: ltr;&quot;&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;div dir=&quot;ltr&quot; id=&quot;docs-internal-guid-e2d5fa66-7fff-dcb7-61ed-8a45f4babd14&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;A note about Nessus. As many will point out, Nessus no longer allows base installations to utilize API functionality. You need to have Tennable IO or Tennable SC to be able to utilize the API at all. In a later post, I will go over how you can setup a query to pull the necessary fields we use here and display them on Grafana, but for now this can be populated with test data. When we do get the API setup, we will be pulling down the total number of vulnerabilities detected in that scan so that we can make a trend graph and show rises and falls over time. Below, you will find screenshots of how both this Jira and Nessus Panels are setup, to give you a better idea of what the queries look like.&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Jira Tasks Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;/h2&gt;&lt;/div&gt;&lt;div class=&quot;Paragraph SCXW62147716 BCX2&quot; style=&quot;background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;&quot;&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Nessus Vulnerabilities Panel&lt;/h2&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt; &lt;/h2&gt;&lt;h2 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;Connecting Jira DB to Graphana &lt;/h2&gt;I think this needs a section all of it’s own. I didn’t go through the Jira API in order to pull who was working what tasks and instead wrote some SQL queries and generated a special user to query the Jira DB. At the time of writing this, it was a lot quicker to do and because the user was only granted select, I wasn’t too worried about the security of this. If I could go back and spend more time on this, I would definitely work with the API to pull the needed information into a seperate SQL DB then import it from there. I actually recommend doing it this way because it will allow you to correlate the usernames of assignees on tickets with their internal Jira ID better. As it stands right now, when this displays ticket statuses, the assignee column will say JIRAUSER10000 instead of my username. The usernames are stored in another table, app_user. Without further ado, here is how Jira lays out the MySQL DB and how you can pull from it.The table we will be referencing is called jiraissue. It holds the issue summary, type, creator, assignee, and a whole host of other descriptors.Jira.jiraissue layout: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We will be using the “created”, “assignee”, and “summary” fields. Create a new user like the one below: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;We then grant select to our new user for this table:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;  It’s important as well to open 3306 on the firewall to allow Grafana to make SQL calls: &lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;And finally the Grafana board properties:&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;/div&gt;&lt;h3 dir=&quot;ltr&quot; id=&quot;docs-internal-guid-94977610-7fff-d191-2258-924fdff51602&quot; style=&quot;line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;&quot;&gt;&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;","headline":"Setting Up Grafana To Display Nessus Results And Jira Tasks","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/setting-up-graphana-to-display-nessus/"},"url":"/posts/setting-up-graphana-to-display-nessus/"}</script><title>Setting Up Grafana To Display Nessus Results And Jira Tasks | Culbert Report</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Culbert Report"><meta name="application-name" content="Culbert Report"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/thumb.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Culbert Report</a></div><div class="site-subtitle font-italic">Offensive security with a dash of becoming a better programmer. Art by Kenton Drumm</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/matt-culbert" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/mattculbert" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['matt','culbertreport.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Setting Up Grafana To Display Nessus Results And Jira Tasks</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Setting Up Grafana To Display Nessus Results And Jira Tasks</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1589561580" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 15, 2020 </em> </span> <span> Updated <em class="" data-ts="1662492881" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 6, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="841 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><div class="SCXW62147716 BCX2"><h3><span style="color: #cccccc;"><span style="font-family: inherit;">This is a run through on setting up Grafana to pull data from Nessus and tasks from Jira.</span></span></h3></div><div class="SCXW62147716 BCX2"><span style="color: #cccccc;"><span style="font-family: inherit;">Prerequisites:&nbsp;</span></span></div><ul><li><span style="color: #cccccc;"><span style="font-family: inherit;">Two VMs capable of 4 GB of RAM, 2 Cores, 32 GB Disk space each.</span></span><li><span style="color: #cccccc;"><span style="font-family: inherit;">Nessus Version: Nessus-8.10.0-es8.x86_64.rpm</span></span><li><span style="color: #cccccc;"><span style="font-family: inherit;">Installed with: rpm –ivh Nessus-8.10.0-es8.x86_64.rpm</span><span style="font-family: inherit;">&nbsp;</span></span><li><span style="color: #cccccc;"><span style="font-family: inherit;">OS: Fedora 31-1.9</span></span></ul><div class="SCXW62147716 BCX2"><span style="color: #cccccc;"><span style="font-family: inherit;"><br /></span></span></div><div dir="ltr" id="docs-internal-guid-a32d06ff-7fff-f8f1-4920-237466c1f2cd" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><b><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Setting up Grafana</span></b></span></div><ol><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">Add a new file to your YUM repo and populate it with the data below.&nbsp;&nbsp;&nbsp;</span></span><ul><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">sudo nano /etc/yum.repos.d/grafana.repo</span></span></span></ul><ul><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">[grafana]name=grafanabaseurl=https://packages.grafana.com/oss/rpmrepo_gpgcheck=1enabled=1gpgcheck=1gpgkey=https://packages.grafana.com/gpg.keysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crt</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">Once that is done, we can install Grafana</span></span><ul><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">sudo yum install grafana</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">We will need to allow this through on the firewall, it uses port 3000</span></span><ul><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Firewall-cmd -–add-port=3000/tcp --permanent</span></span></span><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Firewall-cmd –reload</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">Log into the Grafana dashboard at &lt;localhost&gt;:3000, the username and password is admin/admin</span></span></ol><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre;">&nbsp;&nbsp;&nbsp;</span></span><br /><div dir="ltr" id="docs-internal-guid-471fc01b-7fff-8c3e-4d22-dbf38c70796f" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"> On first login, and after updating the admin password, we are presented with a view of tasks to be done. The first is to add a data source. Select MySQL and enter the host IP, database name, DB username/password, and be sure that the user only has the SELECT permission on the database. Name this after the first client, you will be working with. Save &amp; Test.</span></span></div><span style="color: #cccccc;"><br /></span><br /><div dir="ltr" style="line-height: 1.656; margin-bottom: 12pt; margin-top: 12pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We will then set up a new dashboard. Mouse over the + and click Dashboard. You should now see a new view with a blank panel prompting you to add a query or choose a visualization. Click Add Query. You will be brought to a screen showing a MySQL query that we will modify. First, depending on the client that you are setting up, you want to select from the “query drop down” menu the correct client we are writing this for. If this dashboard is for Client 1, make sure the query is for Client 1. Modify the query to reflect the below image. We are telling MySQL to pull data from a table called "test" and select the column "number_of_vulns", and "time" which we'll use to chart a trend graph.</span></span></div></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-o58D0qaUawc/Xr73-Ogx8BI/AAAAAAAAAVw/kVnnesE4lhoF1kLxr6pIdSI3Yo4Y90aYACPcBGAYYCw/s1600/png%253Bbase645197b89af066f32c.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 352'%3E%3C/svg%3E" border="0" data-original-height="322" data-original-width="585" height="352" data-src="https://1.bp.blogspot.com/-o58D0qaUawc/Xr73-Ogx8BI/AAAAAAAAAVw/kVnnesE4lhoF1kLxr6pIdSI3Yo4Y90aYACPcBGAYYCw/s640/png%253Bbase645197b89af066f32c.png" width="640" class="lazyload" data-proofer-ignore></a></div><span style="color: #cccccc;"><br /></span><span id="goog_991474242"></span><span id="goog_991474243"></span><br /><div class="SCXW62147716 BCX2"><div dir="ltr" id="docs-internal-guid-ef05e7b2-7fff-692f-b39d-7aa481c49443" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><b><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Setting up SQL Clients</span></b></span></div><span style="color: #cccccc;"><br /></span><br /><div dir="ltr" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We need to setup a test client with a MySQL DB to emulate how our Nessus scanner will send results. &nbsp;</span></span></div><ol><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Edit the MySQL cnf file to add the line</span></span><ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">bind-address = IPofGrafana</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Login as root to MySQL and create the database and user</span></span><ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CREATE DATABASE nessus_scans CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;</span></span></span><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CREATE USER 'client1_sql_connector'@'localhost' IDENTIFIED BY 'Str0ngDBP@ssw%rd';</span></span></span><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">GRANT SELECT on nessus_scans.* TO 'client1_sql_connector'@'IPofGrafana' IDENTIFIED BY 'Str0ngDBP@ssw%rd';</span></span></span><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">FLUSH PRIVILEGES;</span></span></span><li><span style="color: #cccccc;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">QUIT;</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Create the table for Nessus results&nbsp;&nbsp;</span></span><ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">CREATE TABLE test( id int NOT NULL auto_increment, time datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, number_of_vulns INT NOT NULL, PRIMARY KEY (ID) );</span></span></span></ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">The insert statement I used to test this:</span></span><ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">INSERT INTO test (number_of_vulns) VALUES (50);</span></span></span><ul><li><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Id and Date are auto calculated, we only need to fill in the number of vulnerabilities detected for our test.</span></span></ul></ul></ol><span style="color: #cccccc;"><br /></span><br /><div dir="ltr" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Create additional databases and tables for each piece of software being used. Pictured below are the Grafana customization's for each panel and the table layout.</span></span></div><span style="color: #cccccc;"><br /></span></div><div class="OutlineElement Ltr SCXW62147716 BCX2" style="direction: ltr;"><div class="Paragraph SCXW62147716 BCX2" style="background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;"><span style="color: #cccccc;"><br /></span><br /><div dir="ltr" id="docs-internal-guid-e2d5fa66-7fff-dcb7-61ed-8a45f4babd14" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">A note about Nessus. As many will point out, Nessus no longer allows base installations to utilize API functionality. You need to have Tennable IO or Tennable SC to be able to utilize the API at all. In a later post, I will go over how you can setup a query to pull the necessary fields we use here and display them on Grafana, but for now this can be populated with test data. When we do get the API setup, we will be pulling down the total number of vulnerabilities detected in that scan so that we can make a trend graph and show rises and falls over time. Below, you will find screenshots of how both this Jira and Nessus Panels are setup, to give you a better idea of what the queries look like.</span></span></div><span style="color: #cccccc;"><br /></span><br /><h2 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc; font-size: large;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">Jira Tasks Panel</span></span></h2><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-lQdFhRrUyIs/Xr74AKHGjXI/AAAAAAAAAWY/wkoCwrmZ7vwKC0djFhu-5gorYWCWhIMnQCPcBGAYYCw/s1600/png%253Bbase647da41f55510a4217.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 352'%3E%3C/svg%3E" border="0" data-original-height="360" data-original-width="651" height="352" data-src="https://1.bp.blogspot.com/-lQdFhRrUyIs/Xr74AKHGjXI/AAAAAAAAAWY/wkoCwrmZ7vwKC0djFhu-5gorYWCWhIMnQCPcBGAYYCw/s640/png%253Bbase647da41f55510a4217.png" width="640" class="lazyload" data-proofer-ignore></a></div><h2 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc; font-size: large;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-bkuuaLs-ZDM/Xr74z8PG3-I/AAAAAAAAAWo/-ZHoxM8d198_om9YDPXTpRw4ShM1-oGUQCLcBGAsYHQ/s1600/png%253Bbase64f434912acc8da86c.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 380'%3E%3C/svg%3E" border="0" data-original-height="608" data-original-width="1024" height="380" data-src="https://1.bp.blogspot.com/-bkuuaLs-ZDM/Xr74z8PG3-I/AAAAAAAAAWo/-ZHoxM8d198_om9YDPXTpRw4ShM1-oGUQCLcBGAsYHQ/s640/png%253Bbase64f434912acc8da86c.png" width="640" class="lazyload" data-proofer-ignore></a></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-F2y11yxiqrc/Xr740hWz_ZI/AAAAAAAAAWs/rWh3zYujFeknUlYIDys8ynsMd-b5rSsvACLcBGAsYHQ/s1600/png%253Bbase647a728a899d2a17dc.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 172'%3E%3C/svg%3E" border="0" data-original-height="165" data-original-width="608" height="172" data-src="https://1.bp.blogspot.com/-F2y11yxiqrc/Xr740hWz_ZI/AAAAAAAAAWs/rWh3zYujFeknUlYIDys8ynsMd-b5rSsvACLcBGAsYHQ/s640/png%253Bbase647a728a899d2a17dc.png" width="640" class="lazyload" data-proofer-ignore></a></div></span></span></h2></div><div class="Paragraph SCXW62147716 BCX2" style="background-color: transparent; color: windowtext; font-style: normal; font-weight: normal; margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; text-align: left; text-indent: 0px; vertical-align: baseline;"><h2 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;">Nessus Vulnerabilities Panel</span></h2><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-o58D0qaUawc/Xr73-Ogx8BI/AAAAAAAAAWg/KV4ljqPOjK8ouruJ_j_HGeSww3pMW1cDACPcBGAYYCw/s1600/png%253Bbase645197b89af066f32c.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 352'%3E%3C/svg%3E" border="0" data-original-height="322" data-original-width="585" height="352" data-src="https://1.bp.blogspot.com/-o58D0qaUawc/Xr73-Ogx8BI/AAAAAAAAAWg/KV4ljqPOjK8ouruJ_j_HGeSww3pMW1cDACPcBGAYYCw/s640/png%253Bbase645197b89af066f32c.png" width="640" class="lazyload" data-proofer-ignore></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-IQE2DRlL3_k/Xr73_oz5Z9I/AAAAAAAAAWU/TNupr7a7-xsrz91RCXl46OgucQHZ7Z9dACPcBGAYYCw/s1600/png%253Bbase642ed5b6622a89be1.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 142'%3E%3C/svg%3E" border="0" data-original-height="146" data-original-width="650" height="142" data-src="https://1.bp.blogspot.com/-IQE2DRlL3_k/Xr73_oz5Z9I/AAAAAAAAAWU/TNupr7a7-xsrz91RCXl46OgucQHZ7Z9dACPcBGAYYCw/s640/png%253Bbase642ed5b6622a89be1.png" width="640" class="lazyload" data-proofer-ignore></a></div><h2 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;">&nbsp;</span></h2><h2 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;">Connecting Jira DB to Graphana </span></h2><span style="color: #cccccc;">I think this needs a section all of it's own. I didn't go through the Jira API in order to pull who was working what tasks and instead wrote some SQL queries and generated a special user to query the Jira DB. At the time of writing this, it was a lot quicker to do and because the user was only granted select, I wasn't too worried about the security of this. If I could go back and spend more time on this, I would definitely work with the API to pull the needed information into a seperate SQL DB then import it from there. I actually recommend doing it this way because it will allow you to correlate the usernames of assignees on tickets with their internal Jira ID better. As it stands right now, when this displays ticket statuses, the assignee column will say JIRAUSER10000 instead of my username. The usernames are stored in another table, app_user. Without further ado, here is how Jira lays out the MySQL DB and how you can pull from it.</span><br /><span style="color: #cccccc;"><br /></span><span style="color: #cccccc;">The table we will be referencing is called jiraissue. It holds the issue summary, type, creator, assignee, and a whole host of other descriptors.</span><br /><span style="color: #cccccc;">Jira.jiraissue layout:<span face="&quot;calibri&quot; , sans-serif" id="docs-internal-guid-d035b2f0-7fff-6154-cf02-85ce0924089d" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></span><br /><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" id="docs-internal-guid-d035b2f0-7fff-6154-cf02-85ce0924089d" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span></span><br /><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" id="docs-internal-guid-d035b2f0-7fff-6154-cf02-85ce0924089d" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><a href="https://1.bp.blogspot.com/-kEmRQL2thYk/Xr75UBzin8I/AAAAAAAAAXI/HFFi1o0bArkcxyuHpqwQXl08P6oClvK3wCLcBGAsYHQ/s1600/png%253Bbase64f39636e549d39191.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 620'%3E%3C/svg%3E" border="0" data-original-height="556" data-original-width="573" height="620" data-src="https://1.bp.blogspot.com/-kEmRQL2thYk/Xr75UBzin8I/AAAAAAAAAXI/HFFi1o0bArkcxyuHpqwQXl08P6oClvK3wCLcBGAsYHQ/s640/png%253Bbase64f39636e549d39191.png" width="640" class="lazyload" data-proofer-ignore></a></span></span></div><br /><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" id="docs-internal-guid-d035b2f0-7fff-6154-cf02-85ce0924089d" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">We will be using the "created", "assignee", and "summary" fields. Create a new user like the one below:</span>&nbsp;</span><br /><br /><div class="separator" style="clear: both; text-align: center;"><span style="color: #cccccc;"><a href="https://1.bp.blogspot.com/-Jlj8t6qAzwQ/Xr75TpjKwhI/AAAAAAAAAXE/SclEZFP5rf4rzYe5H5L_6vc2uEcSuoNvwCPcBGAYYCw/s1600/png%253Bbase64e69a52975bb711c9.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 170'%3E%3C/svg%3E" border="0" data-original-height="85" data-original-width="319" height="170" data-src="https://1.bp.blogspot.com/-Jlj8t6qAzwQ/Xr75TpjKwhI/AAAAAAAAAXE/SclEZFP5rf4rzYe5H5L_6vc2uEcSuoNvwCPcBGAYYCw/s640/png%253Bbase64e69a52975bb711c9.png" width="640" class="lazyload" data-proofer-ignore></a></span></div><br /><br /><span style="color: #cccccc;">We then grant select to our new user for this table:</span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-xJFR09cuCSE/Xr75mnZsa5I/AAAAAAAAAXY/NwvE0W_9kiAHl_3pUBwxjOiaMmP9AJ1BwCLcBGAsYHQ/s1600/png%253Bbase64fbb3c259eb8a8137.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 24'%3E%3C/svg%3E" border="0" data-original-height="32" data-original-width="852" height="24" data-src="https://1.bp.blogspot.com/-xJFR09cuCSE/Xr75mnZsa5I/AAAAAAAAAXY/NwvE0W_9kiAHl_3pUBwxjOiaMmP9AJ1BwCLcBGAsYHQ/s640/png%253Bbase64fbb3c259eb8a8137.png" width="640" class="lazyload" data-proofer-ignore></a></div><span style="color: #cccccc;">&nbsp;</span> <br /><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" id="docs-internal-guid-f3f910f0-7fff-ce40-4dfd-0275ebafcb53" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">It’s important as well to open 3306 on the firewall to allow Grafana to make SQL calls:</span><span face="&quot;calibri&quot; , sans-serif" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">&nbsp;</span></span><br /><br /><div class="separator" style="clear: both; text-align: center;"><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><a href="https://1.bp.blogspot.com/-2fdB31nURLw/Xr75Tuq-dcI/AAAAAAAAAXM/o4YNjqm_QIcAGK433GxfjJ2X07BeYjOLACPcBGAYYCw/s1600/png%253Bbase64dc0a44e89655d9a1.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 78'%3E%3C/svg%3E" border="0" data-original-height="66" data-original-width="534" height="78" data-src="https://1.bp.blogspot.com/-2fdB31nURLw/Xr75Tuq-dcI/AAAAAAAAAXM/o4YNjqm_QIcAGK433GxfjJ2X07BeYjOLACPcBGAYYCw/s640/png%253Bbase64dc0a44e89655d9a1.png" width="640" class="lazyload" data-proofer-ignore></a></span></span></div><br /><br /><span style="color: #cccccc;"><span face="&quot;calibri&quot; , sans-serif" style="background-color: transparent; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">And finally the Grafana board properties:</span></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-9Qfe58KYtOU/Xr75ToEaxTI/AAAAAAAAAXQ/9OqS6DZI0QY0GSSeXD2hmPE1fyJxiwsFQCPcBGAYYCw/s1600/png%253Bbase64bd05c63d8d07dbad.png" style="margin-left: 1em; margin-right: 1em;" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 300'%3E%3C/svg%3E" border="0" data-original-height="341" data-original-width="726" height="300" data-src="https://1.bp.blogspot.com/-9Qfe58KYtOU/Xr75ToEaxTI/AAAAAAAAAXQ/9OqS6DZI0QY0GSSeXD2hmPE1fyJxiwsFQCPcBGAYYCw/s640/png%253Bbase64bd05c63d8d07dbad.png" width="640" class="lazyload" data-proofer-ignore></a></div><br /><h3 dir="ltr" id="docs-internal-guid-94977610-7fff-d191-2258-924fdff51602" style="line-height: 1.58932; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: #cccccc;"><span style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"><span id="docs-internal-guid-b4730d6c-7fff-ef4c-e4a0-7628d544a354" style="background-color: transparent; font-family: &quot;arial&quot;; font-size: 11pt; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"></span></span></span></h3></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/graphana/" class="post-tag no-text-decoration" >graphana</a> <a href="/tags/nessus/" class="post-tag no-text-decoration" >nessus</a> <a href="/tags/jira/" class="post-tag no-text-decoration" >jira</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setting%20Up%20Grafana%20To%20Display%20Nessus%20Results%20And%20Jira%20Tasks%20-%20Culbert%20Report&url=%2Fposts%2Fsetting-up-graphana-to-display-nessus%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Setting%20Up%20Grafana%20To%20Display%20Nessus%20Results%20And%20Jira%20Tasks%20-%20Culbert%20Report&u=%2Fposts%2Fsetting-up-graphana-to-display-nessus%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fsetting-up-graphana-to-display-nessus%2F&text=Setting%20Up%20Grafana%20To%20Display%20Nessus%20Results%20And%20Jira%20Tasks%20-%20Culbert%20Report" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Human-Learning-Is-Irreplaceable/">Human Learning Is Irreplaceable</a><li><a href="/posts/Building-A-Detection-Lab-Around-Suricata/">Building A Detection Lab Around Suricata</a><li><a href="/posts/Making-Red-Teaming-Safer/">Making Red Teaming Safer</a><li><a href="/posts/The-evolution-of-evasion/">The Evolution Of Evasion</a><li><a href="/posts/C2-Smackdown-Empire-vs-Mythic/">C2 Smackdown Empire Vs Mythic</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/redteam/">redteam</a> <a class="post-tag" href="/tags/c2/">c2</a> <a class="post-tag" href="/tags/container/">container</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/graphana/">graphana</a> <a class="post-tag" href="/tags/jira/">jira</a> <a class="post-tag" href="/tags/nessus/">nessus</a> <a class="post-tag" href="/tags/non-technical/">non-technical</a> <a class="post-tag" href="/tags/nuages/">nuages</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Human-Learning-Is-Irreplaceable/"><div class="card-body"> <em class="small" data-ts="1759881600" data-df="ll" > Oct 8, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Human Learning Is Irreplaceable</h3><div class="text-muted small"><p> What we call “AI” is really just a cancer attacking our ability to learn and we have very little time remaining to carve it out. A note When I began writing this, it was June in Vermont and one ...</p></div></div></a></div><div class="card"> <a href="/posts/Building-A-Detection-Lab-Around-Suricata/"><div class="card-body"> <em class="small" data-ts="1720656000" data-df="ll" > Jul 11, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Building A Detection Lab Around Suricata</h3><div class="text-muted small"><p> Building A Detection Lab Around Suricata A while back there were a flurry of posts from different people about how they were configuring their homelabs, rebuilding them to do X better than somet...</p></div></div></a></div><div class="card"> <a href="/posts/Making-Red-Teaming-Safer/"><div class="card-body"> <em class="small" data-ts="1707955200" data-df="ll" > Feb 15, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Making Red Teaming Safer</h3><div class="text-muted small"><p> I have been quietly hard at work the past few months turning an old project that didn’t quite work even half the time into a framework that provides the solid base of functionality required to bui...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/htb-nest-writeup/" class="btn btn-outline-primary" prompt="Older"><p>HTB - Nest Writeup</p></a> <a href="/posts/containerizing-your-c2-nuages-docker/" class="btn btn-outline-primary" prompt="Newer"><p>Containerizing Your C2: Nuages, Docker, & A Dusty Pi</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/redteam/">redteam</a> <a class="post-tag" href="/tags/c2/">c2</a> <a class="post-tag" href="/tags/container/">container</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/graphana/">graphana</a> <a class="post-tag" href="/tags/jira/">jira</a> <a class="post-tag" href="/tags/nessus/">nessus</a> <a class="post-tag" href="/tags/non-technical/">non-technical</a> <a class="post-tag" href="/tags/nuages/">nuages</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/">Matt Culbert</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
